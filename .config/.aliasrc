###################
# ALIAS LIST START #
###################

# copy working directory
alias cwd="pwd | xclip -selection clipboard"

# RUST UTILS
# improved find util in Rust
# alias fd="fdfind -H"
alias fd="fd -H"
# alias find="fdfind"
# improved cat util in Rust
alias bat="batcat"
# replace grep completely with ripgrep
alias grep ="rg"
# rust fuzzy finder
# ripgrep fuzzy finder
alias skg="sk --ansi -i -c 'rga --color=always --line-number "{}" .'"
alias skf="sk --ansi -i --color=always"

# reboot / halt / poweroff
alias reboot="sudo /sbin/reboot"
alias pdown="systemctl poweroff"
alias halt="sudo /sbin/halt"
# boot up your display
alias sx="startx"
# reload the fish shell
alias rl="source ~/.config/fish/conf.d/omf.fish"

# check for an hdmi, if there is one plugged in, flip over to it
alias hdmi="/home/archan/documents/code/shell_scripts/flip_hdmi.sh"
# launch ranger file manager
alias rr="env TERM=xterm-kitty ranger"
# starting daemons:
# spotifyd
alias spot="systemctl --user stop spotifyd && systemctl --user start spotifyd"
# make lf run with image and document previewers
alias lf="lfrun"

##############
# CORE UTILS #
##############

# better find function in Rust
alias fde="fd --extension"

# list directory contents in Rust
alias ls="exa --color=always --group-directories-first"
alias sl="exa -a --color=always --group-directories-first"
alias ll="exa -la --header --icons --git --color=always --group-directories-first"
alias lt="exa -laT --level=3 --header --color=always --group-directories-first"
alias ld="exa -lad */ --color=always"

# colorisation
alias dir="dir --color=auto"
alias vdir="vdir --color=auto"

# 'go tos'
alias ..="cd .."
alias ...="cd ../../"
alias ....="cd ../../../"
alias .....="cd ../../../../"
alias .2="cd ../../"
alias .3="cd ../../../"
alias .4="cd ../../../../"
alias .5="cd ../../../../.."

# git
alias lg="lazygit"

# clear the terminal with c
alias c="clear"
# move all to the parent directory
# (up = 'unpack' or '(move) up')
alias up="mv * .."

# opens calculator
alias bc="bc -l"
# handy short cuts #
alias h="history"
alias j="jobs -l"

# tell me the path
# alias path='echo -e ${PATH//:/\\n}'

# check date/time
alias now="date +"%T""
alias nowtime="date +"%T""
alias nowdate="date +"%d-%m-%Y""

# I'm a vim boi now

# # ubuntu
alias vim="$HOME/nvim.appimage"
alias vi="$HOME/nvim.appimage"
alias edit="$HOME/nvim.appimage"

# update on one command
# debian
alias update="sudo apt-get update && sudo apt-get upgrade"
## pass options to free ##
alias meminfo="free -m -l -t"
## get top process eating memory
alias psmem="ps auxf | sort -nr -k 4"
alias psmem10="ps auxf | sort -nr -k 4 | head -10"
## get top process eating cpu ##
alias pscpu="ps auxf | sort -nr -k 3"
alias pscpu10="ps auxf | sort -nr -k 3 | head -10"
## Get server cpu info ##
alias cpuinfo="lscpu"
## get GPU ram on desktop / laptop##
alias gpumeminfo="grep -i --color memory /var/log/Xorg.0.log"
# activate your virtual environment
# provided there is a venv_activate.sh executable in the project directory
alias cenv="conda create -n cenv"
alias ve="source venv/bin/activate"
alias ce="conda activate cenv"
# What's yer network speed?
alias speed="speedtest-cli --server 6513 --simple"

# BLUETOOTH ALIASES
# start bluetooth (hardware)
alias bluon="sudo systemctl enable bluetooth && sudo systemctl start bluetooth"
alias blustat="sudo systemctl status bluetooth"

# TASKWARRIOR ALIASES
# add a task
alias ta="task add $1"
# list your tasks
alias tl="task list"
# edit a task
alias te="task $1 edit"
# delete a task
alias tx="task $1 delete"
# mark a task as done
alias td="task $1 done"
# undo a task action
alias tu="task undo"
# leave contexts, see it all
alias tn="task context none"

# LATEX ALIASES
alias texclean="rm *.aux *.bbl *.bcf *.blg *.fdb_latexmk *.fls *.lof *.log *.out *.run.xml *.synctex.gz *.toc"

# PERIPHERALS
# force usb keyboard to be gb, with caplock=ctrl
alias gbkb="setxkbmap -layout gb -option ctrl:nocaps"

# use vdirsyncer to sync khal calendar
alias vdirsyncer="~/vdirsyncer_env/bin/vdirsyncer"

# a stopwatch
stopwatch() {
    start=$(date +%s)
    while true; do
        time="$(( $(date +%s) - $start))"
        printf '%s\r' "$(date -u -d "@$time" +%H:%M:%S)"
        sleep 0.2
    done
}

alias swal="feh --bg-fill --randomize ~/.config/wallpapers/*"

# check the power
alias batt="upower -i /org/freedesktop/UPower/devices/battery_BAT0 | rg 'state|to full|percentage'"
# check CPU temp
alias temp="sensors | grep CPU"
# activate nightlight
alias nightlight="redshift -l 51.509865:-0.118092"

# WIFI
# list available wifi networks
alias wifi="nmcli device wifi list"
# connect to a wifi network with a password
wificonn(){
  arg1=$1
  arg2=$2
  nmcli device wifi connect $arg1 password $arg2
}
# connect to a wifi network without a password
wificonnpub(){
    arg1=$1
    nmcli device wifi connect $arg1
  }

# wificonn() {
#   arg1=$1
#   # connect to a wifi network without a password
#   if [ -z "$2" ]; then
#     nmcli device wifi connect $arg1
#   # connect to a wifi network without a password
#   else
#     $arg2=$2
#     nmcli device wifi connect $arg1 password $arg2
#   fi
#   # rest of the function code that uses my_optional_arg
# }

# look search for available timezone by continent or city
tzfd(){
  arg1=$1
  timedatectl list-timezones | rg $arg1
}

# change to a given timezone in the format Zone/SubZone (usually Continent/City)
tzch(){
  arg1=$1
  arg2=$2
  sudo timedatectl set-timezone $arg1/$arg2
}

# convert docx to markdown
docx2md(){
  arg1=$1
  pandoc -s $arg1 --wrap=none --reference-links -t markdown -o $arg1.md
}

# EMAIL
# alias to put mbsync config file in .config
alias mbsync="mbsync -c \"/home/squish/.config/isync/mbsyncrc\""
# alias mbsync="mbsync -c \"$XDG_CONFIG_HOME/isync/mbsyncrc\""

fr() {
  # Replace all instances of $1 with $2 recursively in the current directory
  rg -l "$1" | xargs sed -i "s/$1/$2/g"
}

# Arch-specific (non-ubuntu) aliases only go here
if [[ $(uname -rv) == *"arch"* ]]; then
    alias vim="nvim"
    alias vi="nvim"
    alias edit="nvim"
    alias batcat="bat"
fi

# what runs at every new terminal?
# alias neofetch='/usr/bin/neofetch --ascii /home/ishan/neorg/todo.norg'
# alias neofetch="fortune|cowsay -f tux|lolcat"
# alias neofetch="bat ~/documents/notes/idle.norg"
# alias neofetch='/usr/bin/neofetch --ascii "fortune|cowsay -f tux|lolcat"'
#
# kitty shortcuts
alias ims="kitty +kitten icat"

# for viewing csv files
tv(){
  arg1=$1
  tidy-viewer $arg1
}
